{"version":3,"sources":["./src/app/pages/profile/profile.page.html","./src/app/pages/profile/profile-routing.module.ts","./src/app/pages/profile/profile.module.ts","./src/app/pages/profile/profile.page.scss","./src/app/pages/profile/profile.page.ts"],"names":[],"mappings":"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","file":"profile-profile-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title class='title'>Profile</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [scrollY]=\\\"false\\\">\\n\\n  <div class=\\\"avatar__container\\\" (click)='loadImage()'>\\n    <img class=\\\"profile-img\\\" [src]='this.me.image? this.me.image : \\\"./assets/users/me.png\\\"'>\\n  </div>\\n\\n  <ion-item>\\n    <ion-label position=\\\"stacked\\\">Name</ion-label>\\n    <ion-input [(ngModel)]=\\\"me.name\\\" [readonly]=\\\"readOnly\\\"></ion-input>\\n  </ion-item>\\n  <ion-item>\\n    <ion-label position=\\\"stacked\\\">Surname</ion-label>\\n    <ion-input [(ngModel)]=\\\"me.surname\\\" [readonly]=\\\"readOnly\\\"></ion-input>\\n  </ion-item>\\n  <ion-item>\\n    <ion-label position=\\\"stacked\\\">Email</ion-label>\\n    <ion-input type=\\\"email\\\" [(ngModel)]=\\\"me.email\\\" [readonly]=\\\"readOnly\\\"></ion-input>\\n  </ion-item>\\n\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <ion-button expand=\\\"block\\\" fill=\\\"solid\\\" color=\\\"secondary\\\" (click)=\\\"editAndSave()\\\">\\n          <ion-icon [name]=\\\"readOnly ? 'create' : 'checkmark'\\\"></ion-icon> \\n          {{ readOnly ? 'Edit' : 'Save' }} profile\\n        </ion-button>\\n      </ion-col>\\n      <ion-col>\\n        <ion-button expand=\\\"block\\\" fill=\\\"solid\\\" color=\\\"danger\\\" (click)=\\\"deleteMe()\\\">\\n          <ion-icon name=\\\"close-circle\\\"></ion-icon> \\n          Delete profile\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-toolbar>\\n    <ion-buttons class=\\\"button-logout\\\">\\n      <ion-button fill='solid' color=\\\"primary\\\" (click)=\\\"logout()\\\">Logout</ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-footer>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ProfilePage } from './profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProfilePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProfilePageRoutingModule } from './profile-routing.module';\n\nimport { ProfilePage } from './profile.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ProfilePageRoutingModule\n  ],\n  declarations: [ProfilePage]\n})\nexport class ProfilePageModule {}\n","export default \".avatar__container {\\n  width: 100%;\\n  height: 175px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background-color: var(--ion-color-light);\\n  margin-bottom: 25px;\\n}\\n.avatar__container .profile-img {\\n  width: 160px;\\n  height: 160px;\\n  border-radius: 50%;\\n}\\n.button-logout {\\n  display: flex;\\n  justify-content: center;\\n}\\n.button-logout ion-button {\\n  --border-radius: 8px;\\n  width: 250px;\\n  height: 40px;\\n}\\n@media only screen and (min-width: 768px) {\\n  ion-item {\\n    font-size: 22px;\\n  }\\n\\n  ion-button {\\n    font-size: 18px;\\n  }\\n}\\n@media only screen and (max-width: 767px) {\\n  ion-item {\\n    font-size: 20px;\\n  }\\n\\n  ion-button {\\n    font-size: 15px;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcHJvZmlsZS9HOlxcVW5pY3RcXE1BVEVSSUUgVEVSWk8gQU5OT1xcU2VtaW5hcmlvIHBlciB0aXJvY2luaW9cXFByb2dldHRvXFxQcm9nZXR0b1BhcmFkaWdtYVxcSW9uaWMvc3JjXFxhcHBcXHBhZ2VzXFxwcm9maWxlXFxwcm9maWxlLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvcHJvZmlsZS9wcm9maWxlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFdBQUE7RUFDQSxhQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7RUFDQSx3Q0FBQTtFQUNBLG1CQUFBO0FDQ0o7QURBSTtFQUNJLFlBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7QUNFUjtBREVBO0VBQ0ksYUFBQTtFQUNBLHVCQUFBO0FDQ0o7QURBSTtFQUNJLG9CQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7QUNFUjtBREVBO0VBQ0k7SUFDSSxlQUFBO0VDQ047O0VEQ0U7SUFDSSxlQUFBO0VDRU47QUFDRjtBRENBO0VBQ0k7SUFDSSxlQUFBO0VDQ047O0VEQ0U7SUFDSSxlQUFBO0VDRU47QUFDRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3Byb2ZpbGUvcHJvZmlsZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYXZhdGFyX19jb250YWluZXIge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTc1cHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWlvbi1jb2xvci1saWdodCk7XG4gICAgbWFyZ2luLWJvdHRvbTogMjVweDtcbiAgICAucHJvZmlsZS1pbWcge1xuICAgICAgICB3aWR0aDogMTYwcHg7XG4gICAgICAgIGhlaWdodDogMTYwcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICB9XG59XG5cbi5idXR0b24tbG9nb3V0IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGlvbi1idXR0b24ge1xuICAgICAgICAtLWJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgd2lkdGg6IDI1MHB4O1xuICAgICAgICBoZWlnaHQ6IDQwcHg7XG4gICAgfVxufVxuXG5AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDc2OHB4KSB7XG4gICAgaW9uLWl0ZW0ge1xuICAgICAgICBmb250LXNpemU6IDIycHg7XG4gICAgfVxuICAgIGlvbi1idXR0b24ge1xuICAgICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgfVxufVxuXG5AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc2N3B4KSB7XG4gICAgaW9uLWl0ZW0ge1xuICAgICAgICBmb250LXNpemU6IDIwcHg7XG4gICAgfVxuICAgIGlvbi1idXR0b24ge1xuICAgICAgICBmb250LXNpemU6IDE1cHg7XG4gICAgfVxufSIsIi5hdmF0YXJfX2NvbnRhaW5lciB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDE3NXB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW9uLWNvbG9yLWxpZ2h0KTtcbiAgbWFyZ2luLWJvdHRvbTogMjVweDtcbn1cbi5hdmF0YXJfX2NvbnRhaW5lciAucHJvZmlsZS1pbWcge1xuICB3aWR0aDogMTYwcHg7XG4gIGhlaWdodDogMTYwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbn1cblxuLmJ1dHRvbi1sb2dvdXQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cbi5idXR0b24tbG9nb3V0IGlvbi1idXR0b24ge1xuICAtLWJvcmRlci1yYWRpdXM6IDhweDtcbiAgd2lkdGg6IDI1MHB4O1xuICBoZWlnaHQ6IDQwcHg7XG59XG5cbkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNzY4cHgpIHtcbiAgaW9uLWl0ZW0ge1xuICAgIGZvbnQtc2l6ZTogMjJweDtcbiAgfVxuXG4gIGlvbi1idXR0b24ge1xuICAgIGZvbnQtc2l6ZTogMThweDtcbiAgfVxufVxuQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjdweCkge1xuICBpb24taXRlbSB7XG4gICAgZm9udC1zaXplOiAyMHB4O1xuICB9XG5cbiAgaW9uLWJ1dHRvbiB7XG4gICAgZm9udC1zaXplOiAxNXB4O1xuICB9XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\nimport { User } from 'src/app/interfaces/user';\nimport { AuthService } from 'src/app/services/auth/auth.service';\nimport { UsersService } from 'src/app/services/users/users.service';\nimport { NavController } from '@ionic/angular';\nimport { UniLoaderService } from 'src/app/shared/uniLoader.service';\nimport { ToastService } from 'src/app/shared/toast.service';\nimport { ToastTypes } from 'src/app/enums/toast-types.enum';\nimport { UniAlertService } from 'src/app/shared/uniAlert.service';\nimport { LoadImageService } from 'src/app/shared/loadImage.service';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.page.html',\n  styleUrls: ['./profile.page.scss'],\n})\nexport class ProfilePage implements OnInit {\n\n  me: User;\n\n  readOnly = true;\n\n  constructor(\n    private auth: AuthService,\n    private usersService: UsersService,\n    private navCtrl: NavController,\n    private uniLoader: UniLoaderService,\n    private toastService: ToastService,\n    private uniAlert: UniAlertService,\n    private tweetImage: LoadImageService\n  ) { }\n\n  ngOnInit() {\n    this.me = this.auth.me;\n  }\n\n// da sistemare e assegnare l'immagine all'utente e non al tweet\n  async loadImage() {\n    await this.tweetImage.getPhoto().then(res => {\n      this.me.image = res;\n    });\n  //  document.getElementsByClassName('cordova-camera-select')[0];\n  }\n\n  async editAndSave() {\n\n    // Se l'utente è in modalità modifica...\n    if (!this.readOnly) {\n      try {\n\n        // Avvio il loader\n        await this.uniLoader.show();\n\n        // Salvo le modifiche apportate all'oggetto 'me'\n        await this.usersService.editUser(this.me);\n\n        // Rimuovo il loader\n        await this.uniLoader.dismiss();\n\n        // Mostro toast di conferma\n        await this.toastService.show({\n          message: 'Your account edits are now safe and sound!',\n          type: ToastTypes.SUCCESS\n        });\n\n      } catch (err) {\n\n        // Chiudo il loader\n        await this.uniLoader.dismiss();\n\n        // Nel caso la chiamata vada in errore, mostro l'errore in un toast\n        await this.toastService.show({\n          message: err.message,\n          type: ToastTypes.ERROR\n        });\n\n      }\n    }\n\n    // Altrimenti, cambio lo stato della mia variabile - per rendere i campi editabili o meno\n    this.readOnly = !this.readOnly;\n\n  }\n\n  async deleteMe() {\n\n    // Creo testo e callbacks per i bottoni del mio loader\n    const alertButtons = [{\n      text: 'Cancel',\n      role: 'cancel',\n      cssClass: 'secondary',\n      handler: () => {}\n    }, {\n      text: 'OK',\n      handler: async () => {\n        this.confirmedDeletedUser();\n      }\n    }];\n\n    // Mostro il loader per chiedere all'utente conferma\n    await this.uniAlert.show({\n      header: 'Head up!',\n      subHeader: 'You are about to delete your own account.',\n      message: 'Do you confirm you want to proceed with this action?',\n      buttons: alertButtons\n    });\n\n  }\n\n  async confirmedDeletedUser() {\n\n    try {\n\n      // Avvio il loader\n      await this.uniLoader.show();\n\n      // Effettuo la chiamata per cancellare la il mio utente\n      await this.usersService.deleteUser(this.me._id);\n\n      // Procedo con il logout\n      await this.logout();\n\n    } catch (err) {\n\n      // Nel caso la chiamata vada in errore, mostro l'errore in un toast\n      await this.toastService.show({\n        message: err.message,\n        type: ToastTypes.ERROR\n      });\n\n    }\n\n    // Chiudo il loader\n    await this.uniLoader.dismiss();\n\n  }\n\n  async logout() {\n\n    // Cancello il mio utente in sessione, settando il mio oggetto a oggetto vuoto\n    this.auth.me = {} as User;\n\n    // Cancello il token in sessione settandolo come undefined\n    this.auth.userToken = undefined;\n\n    // Navigo l'utente nella schermata Login\n    await this.navCtrl.navigateRoot('/login');\n\n  }\n\n}\n"],"sourceRoot":"webpack:///"}