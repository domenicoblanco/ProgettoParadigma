{"version":3,"sources":["webpack:///src/app/pages/profile/profile.page.html","webpack:///src/app/pages/profile/profile-routing.module.ts","webpack:///src/app/pages/profile/profile.module.ts","webpack:///src/app/pages/profile/profile.page.scss","webpack:///src/app/pages/profile/profile.page.ts"],"names":["routes","path","component","ProfilePageRoutingModule","imports","forChild","exports","ProfilePageModule","declarations","ProfilePage","auth","usersService","navCtrl","uniLoader","toastService","uniAlert","tweetImage","readOnly","me","getPhoto","then","res","image","show","editUser","dismiss","message","type","SUCCESS","ERROR","alertButtons","text","role","cssClass","handler","confirmedDeletedUser","header","subHeader","buttons","deleteUser","_id","logout","userToken","undefined","navigateRoot","selector","template"],"mappings":"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","file":"profile-profile-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title class='title'>Profile</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [scrollY]=\\\"false\\\">\\n\\n  <div class=\\\"avatar__container\\\" (click)='loadImage()'>\\n    <img class=\\\"profile-img\\\" [src]='this.me.image? this.me.image : \\\"./assets/users/me.png\\\"'>\\n  </div>\\n\\n  <ion-item>\\n    <ion-label position=\\\"stacked\\\">Name</ion-label>\\n    <ion-input [(ngModel)]=\\\"me.name\\\" [readonly]=\\\"readOnly\\\"></ion-input>\\n  </ion-item>\\n  <ion-item>\\n    <ion-label position=\\\"stacked\\\">Surname</ion-label>\\n    <ion-input [(ngModel)]=\\\"me.surname\\\" [readonly]=\\\"readOnly\\\"></ion-input>\\n  </ion-item>\\n  <ion-item>\\n    <ion-label position=\\\"stacked\\\">Email</ion-label>\\n    <ion-input type=\\\"email\\\" [(ngModel)]=\\\"me.email\\\" [readonly]=\\\"readOnly\\\"></ion-input>\\n  </ion-item>\\n\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <ion-button expand=\\\"block\\\" fill=\\\"solid\\\" color=\\\"secondary\\\" (click)=\\\"editAndSave()\\\">\\n          <ion-icon [name]=\\\"readOnly ? 'create' : 'checkmark'\\\"></ion-icon> \\n          {{ readOnly ? 'Edit' : 'Save' }} profile\\n        </ion-button>\\n      </ion-col>\\n      <ion-col>\\n        <ion-button expand=\\\"block\\\" fill=\\\"solid\\\" color=\\\"danger\\\" (click)=\\\"deleteMe()\\\">\\n          <ion-icon name=\\\"close-circle\\\"></ion-icon> \\n          Delete profile\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-toolbar>\\n    <ion-buttons class=\\\"button-logout\\\">\\n      <ion-button fill='solid' color=\\\"primary\\\" (click)=\\\"logout()\\\">Logout</ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-footer>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ProfilePage } from './profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProfilePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProfilePageRoutingModule } from './profile-routing.module';\n\nimport { ProfilePage } from './profile.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ProfilePageRoutingModule\n  ],\n  declarations: [ProfilePage]\n})\nexport class ProfilePageModule {}\n","export default \".avatar__container {\\n  width: 100%;\\n  height: 175px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background-color: var(--ion-color-light);\\n  margin-bottom: 25px;\\n}\\n.avatar__container .profile-img {\\n  width: 160px;\\n  height: 160px;\\n  border-radius: 50%;\\n}\\n.button-logout {\\n  display: flex;\\n  justify-content: center;\\n}\\n.button-logout ion-button {\\n  --border-radius: 8px;\\n  width: 250px;\\n  height: 40px;\\n}\\n@media only screen and (min-width: 768px) {\\n  ion-item {\\n    font-size: 22px;\\n  }\\n\\n  ion-button {\\n    font-size: 18px;\\n  }\\n}\\n@media only screen and (max-width: 767px) {\\n  ion-item {\\n    font-size: 20px;\\n  }\\n\\n  ion-button {\\n    font-size: 15px;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcHJvZmlsZS9HOlxcVW5pY3RcXE1BVEVSSUUgVEVSWk8gQU5OT1xcU2VtaW5hcmlvIHBlciB0aXJvY2luaW9cXFByb2dldHRvXFxQcm9nZXR0b1BhcmFkaWdtYVxcSW9uaWMvc3JjXFxhcHBcXHBhZ2VzXFxwcm9maWxlXFxwcm9maWxlLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvcHJvZmlsZS9wcm9maWxlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFdBQUE7RUFDQSxhQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7RUFDQSx3Q0FBQTtFQUNBLG1CQUFBO0FDQ0o7QURBSTtFQUNJLFlBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7QUNFUjtBREVBO0VBQ0ksYUFBQTtFQUNBLHVCQUFBO0FDQ0o7QURBSTtFQUNJLG9CQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7QUNFUjtBREVBO0VBQ0k7SUFDSSxlQUFBO0VDQ047O0VEQ0U7SUFDSSxlQUFBO0VDRU47QUFDRjtBRENBO0VBQ0k7SUFDSSxlQUFBO0VDQ047O0VEQ0U7SUFDSSxlQUFBO0VDRU47QUFDRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3Byb2ZpbGUvcHJvZmlsZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYXZhdGFyX19jb250YWluZXIge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTc1cHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWlvbi1jb2xvci1saWdodCk7XG4gICAgbWFyZ2luLWJvdHRvbTogMjVweDtcbiAgICAucHJvZmlsZS1pbWcge1xuICAgICAgICB3aWR0aDogMTYwcHg7XG4gICAgICAgIGhlaWdodDogMTYwcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICB9XG59XG5cbi5idXR0b24tbG9nb3V0IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGlvbi1idXR0b24ge1xuICAgICAgICAtLWJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgd2lkdGg6IDI1MHB4O1xuICAgICAgICBoZWlnaHQ6IDQwcHg7XG4gICAgfVxufVxuXG5AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDc2OHB4KSB7XG4gICAgaW9uLWl0ZW0ge1xuICAgICAgICBmb250LXNpemU6IDIycHg7XG4gICAgfVxuICAgIGlvbi1idXR0b24ge1xuICAgICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgfVxufVxuXG5AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc2N3B4KSB7XG4gICAgaW9uLWl0ZW0ge1xuICAgICAgICBmb250LXNpemU6IDIwcHg7XG4gICAgfVxuICAgIGlvbi1idXR0b24ge1xuICAgICAgICBmb250LXNpemU6IDE1cHg7XG4gICAgfVxufSIsIi5hdmF0YXJfX2NvbnRhaW5lciB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDE3NXB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW9uLWNvbG9yLWxpZ2h0KTtcbiAgbWFyZ2luLWJvdHRvbTogMjVweDtcbn1cbi5hdmF0YXJfX2NvbnRhaW5lciAucHJvZmlsZS1pbWcge1xuICB3aWR0aDogMTYwcHg7XG4gIGhlaWdodDogMTYwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbn1cblxuLmJ1dHRvbi1sb2dvdXQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cbi5idXR0b24tbG9nb3V0IGlvbi1idXR0b24ge1xuICAtLWJvcmRlci1yYWRpdXM6IDhweDtcbiAgd2lkdGg6IDI1MHB4O1xuICBoZWlnaHQ6IDQwcHg7XG59XG5cbkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNzY4cHgpIHtcbiAgaW9uLWl0ZW0ge1xuICAgIGZvbnQtc2l6ZTogMjJweDtcbiAgfVxuXG4gIGlvbi1idXR0b24ge1xuICAgIGZvbnQtc2l6ZTogMThweDtcbiAgfVxufVxuQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjdweCkge1xuICBpb24taXRlbSB7XG4gICAgZm9udC1zaXplOiAyMHB4O1xuICB9XG5cbiAgaW9uLWJ1dHRvbiB7XG4gICAgZm9udC1zaXplOiAxNXB4O1xuICB9XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\nimport { User } from 'src/app/interfaces/user';\nimport { AuthService } from 'src/app/services/auth/auth.service';\nimport { UsersService } from 'src/app/services/users/users.service';\nimport { NavController } from '@ionic/angular';\nimport { UniLoaderService } from 'src/app/shared/uniLoader.service';\nimport { ToastService } from 'src/app/shared/toast.service';\nimport { ToastTypes } from 'src/app/enums/toast-types.enum';\nimport { UniAlertService } from 'src/app/shared/uniAlert.service';\nimport { LoadImageService } from 'src/app/shared/loadImage.service';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.page.html',\n  styleUrls: ['./profile.page.scss'],\n})\nexport class ProfilePage implements OnInit {\n\n  me: User;\n\n  readOnly = true;\n\n  constructor(\n    private auth: AuthService,\n    private usersService: UsersService,\n    private navCtrl: NavController,\n    private uniLoader: UniLoaderService,\n    private toastService: ToastService,\n    private uniAlert: UniAlertService,\n    private tweetImage: LoadImageService\n  ) { }\n\n  ngOnInit() {\n    this.me = this.auth.me;\n  }\n\n// da sistemare e assegnare l'immagine all'utente e non al tweet\n  async loadImage() {\n    await this.tweetImage.getPhoto().then(res => {\n      this.me.image = res;\n    });\n  //  document.getElementsByClassName('cordova-camera-select')[0];\n  }\n\n  async editAndSave() {\n\n    // Se l'utente è in modalità modifica...\n    if (!this.readOnly) {\n      try {\n\n        // Avvio il loader\n        await this.uniLoader.show();\n\n        // Salvo le modifiche apportate all'oggetto 'me'\n        await this.usersService.editUser(this.me);\n\n        // Rimuovo il loader\n        await this.uniLoader.dismiss();\n\n        // Mostro toast di conferma\n        await this.toastService.show({\n          message: 'Your account edits are now safe and sound!',\n          type: ToastTypes.SUCCESS\n        });\n\n      } catch (err) {\n\n        // Chiudo il loader\n        await this.uniLoader.dismiss();\n\n        // Nel caso la chiamata vada in errore, mostro l'errore in un toast\n        await this.toastService.show({\n          message: err.message,\n          type: ToastTypes.ERROR\n        });\n\n      }\n    }\n\n    // Altrimenti, cambio lo stato della mia variabile - per rendere i campi editabili o meno\n    this.readOnly = !this.readOnly;\n\n  }\n\n  async deleteMe() {\n\n    // Creo testo e callbacks per i bottoni del mio loader\n    const alertButtons = [{\n      text: 'Cancel',\n      role: 'cancel',\n      cssClass: 'secondary',\n      handler: () => {}\n    }, {\n      text: 'OK',\n      handler: async () => {\n        this.confirmedDeletedUser();\n      }\n    }];\n\n    // Mostro il loader per chiedere all'utente conferma\n    await this.uniAlert.show({\n      header: 'Head up!',\n      subHeader: 'You are about to delete your own account.',\n      message: 'Do you confirm you want to proceed with this action?',\n      buttons: alertButtons\n    });\n\n  }\n\n  async confirmedDeletedUser() {\n\n    try {\n\n      // Avvio il loader\n      await this.uniLoader.show();\n\n      // Effettuo la chiamata per cancellare la il mio utente\n      await this.usersService.deleteUser(this.me._id);\n\n      // Procedo con il logout\n      await this.logout();\n\n    } catch (err) {\n\n      // Nel caso la chiamata vada in errore, mostro l'errore in un toast\n      await this.toastService.show({\n        message: err.message,\n        type: ToastTypes.ERROR\n      });\n\n    }\n\n    // Chiudo il loader\n    await this.uniLoader.dismiss();\n\n  }\n\n  async logout() {\n\n    // Cancello il mio utente in sessione, settando il mio oggetto a oggetto vuoto\n    this.auth.me = {} as User;\n\n    // Cancello il token in sessione settandolo come undefined\n    this.auth.userToken = undefined;\n\n    // Navigo l'utente nella schermata Login\n    await this.navCtrl.navigateRoot('/login');\n\n  }\n\n}\n"]}